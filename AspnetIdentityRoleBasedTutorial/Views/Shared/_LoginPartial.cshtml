@using AspnetIdentityRoleBasedTutorial.Data;
@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@{
    Layout = null;
}

<script>
    function loadLoginView() {
    $.ajax({
            url: "/Account/Manage/Index",
        type: "GET",
        data: { area: "Identity" },
        success: function(response) {
            // Replace the current page content with the login view
            $("#main").html(response);
        },
        error: function() {
            alert("Failed to load login page.");
        }
    });
}


    $(document).ready(function () {
        // Handle the click event of the profile link
        $('.nav-link').click(function (event) {
            event.preventDefault(); // Prevent the default navigation behavior

            // Get the URL from the link's href attribute
            var url = $(this).attr('href');

            // Make an AJAX call to load the layout
            $.ajax({
                url: url,
                type: 'GET',
                success: function (response) {
                    // Replace the content of the body with the loaded layout
                    $('main').html(response);
                },
                error: function (xhr, status, error) {
                    // Handle the error case
                    console.error(error);
                }
            });
        });
    });

</script>

     @if (SignInManager.IsSignedIn(User))
     {
       <li class="nav-item">
@*        <a class="nav-link" onclick="loadLoginView()"><i class="fa fa-user" title="Manage" style="font-size:24px;color:aqua;"></i>Profile</a>
*@         <a class="nav-link text-dark" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage" style="background-color: white;">Profile</a>
       </li>
       <li class="nav-item">
         <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
           <button type="submit" class="nav-link btn btn-link text-dark">Logout</button>
         </form>
       </li>
     }
     else
     {
      @*   <li class="nav-item">
      <a class="nav-link text-white" asp-area="Identity" asp-page="/Account/Register"><h5>Register</h5></a>
      </li>*@
       <li class="nav-item">
    @*      <a class="nav-link" onclick="loadLoginView()"><i class="fa fa-user" style="font-size:24px;color:aqua;"></i>Login</a>
    *@     <a class="nav-link" asp-area="Identity" asp-page="/Account/Login"><i class="fa fa-user" style="font-size:24px;color:aqua;" ></i>Login</a>
       </li>
    @*   <li class="nav-item">
         <a class="nav-link " asp-area="" asp-controller="Cart" asp-action="CartList"><i class="fa fa-shopping-cart" style="font-size:24px">Cart</i></a>
       </li>
    *@ }
